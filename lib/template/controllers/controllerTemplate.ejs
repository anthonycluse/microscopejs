var <%= model.name %>Controller = module.exports = function(app) {

    // properties ==================================

    var <%= model.name %>Service = require('../services/<%= model.name %>Service'); 
	<%= model.name %>Service = new <%= model.name %>Service(); 

    // ==============================================

    // actions =====================================

    // index
    app.get('/<%= model.name %>', function(req, res) {
        <%= model.name %>Service.getAll(function(<%= model.name %>s) {
            res.render('<%= model.name %>/index', {'<%= model.name %>s': <%= model.name %>s});
        });
    });

    // details
    app.get('/<%= model.name %>/details/:id', function(req, res) {
        var <%= model.name %>Id = req.params.id;
        <%= model.name %>Service.get(<%= model.name %>Id, function(<%= model.name %>) {
            res.render('<%= model.name %>/details', {'<%= model.name %>': <%= model.name %>});
        });
    });

    // create get
    app.get('/<%= model.name %>/create', function(req, res) {
		var <%= model.name %> = {};
        res.render('<%= model.name %>/create', {'<%= model.name %>': <%= model.name %>});
    });

    // create post
    app.post('/<%= model.name %>/create', function(req, res) {
        <%= model.name %>Service.save(req.body, function(data) {
            res.redirect('/<%= model.name %>');
        });
    });

    // edit get
    app.get('/<%= model.name %>/edit/:id', function (req, res) {
        var <%= model.name %>Id = req.params.id;
        console.log('id to update' + <%= model.name %>Id);
        <%= model.name %>Service.get(<%= model.name %>Id, function (<%= model.name %>) {
            res.render('<%= model.name %>/edit', { '<%= model.name %>': <%= model.name %> });
        });
    });

    // edit post 
    app.post('/<%= model.name %>/edit', function(req, res) { 
        <%= model.name %>Service.get(req.body.id, function(<%= model.name %>){
            <%= model.name %>Service.update(<%= model.name %>, req.body, function(<%= model.name %>){
                res.redirect('/<%= model.name %>');
            });
        });
    }); 

    // delete get
    app.get('/<%= model.name %>/delete/:id', function(req, res) {
        var <%= model.name %>Id = req.params.id;
        <%= model.name %>Service.get(<%= model.name %>Id, function(<%= model.name %>) {
            res.render('<%= model.name %>/delete', {'<%= model.name %>': <%= model.name %>});
        });
    });

    // delete post
    app.post('/<%= model.name %>/delete', function(req, res) {
        <%= model.name %>Service.remove(req.body.id, function(data) {
			res.redirect('/<%= model.name %>');
        });
    });

    // ==============================================
};
