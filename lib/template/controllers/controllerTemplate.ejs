/**
* <%= model.name %>controller class
*/
var <%= model.name %>Controller = module.exports = (function () {

    var _<%= model.name %>Service = require('../services/<%= model.name %>Service');

    /**
    * @param {app} - express app.
    */
    function <%= model.name %>Controller(app) {
        this.app = app;
		this.<%= model.name %>Service = new _<%= model.name %>Service(); 
        this.actions(this.app);
    }

    /**
    * <%= model.name %> Controller actions.
    * @param {app}
    */
    <%= model.name %>Controller.prototype.actions = function (app) {
		var self = this;

		// index
		app.get('/<%= model.name %>', function(req, res) {
			self.<%= model.name %>Service.getAll(function(<%= model.name %>s) {
				res.render('<%= model.name %>/index', {'<%= model.name %>s': <%= model.name %>s});
			});
		});

		// details
		app.get('/<%= model.name %>/details/:id', function(req, res) {
			var <%= model.name %>Id = req.params.id;
			self.<%= model.name %>Service.get(<%= model.name %>Id, function(<%= model.name %>) {
				res.render('<%= model.name %>/details', {'<%= model.name %>': <%= model.name %>});
			});
		});

		// create get
		app.get('/<%= model.name %>/create', function(req, res) {
			var <%= model.name %> = {};
			res.render('<%= model.name %>/create', {'<%= model.name %>': <%= model.name %>});
		});

		// create post
		app.post('/<%= model.name %>/create', function(req, res) {
			self.<%= model.name %>Service.save(req.body, function(data) {
				res.redirect('/<%= model.name %>');
			});
		});

		// edit get
		app.get('/<%= model.name %>/edit/:id', function (req, res) {
			var <%= model.name %>Id = req.params.id;
			console.log('id to update' + <%= model.name %>Id);
			self.<%= model.name %>Service.get(<%= model.name %>Id, function (<%= model.name %>) {
				res.render('<%= model.name %>/edit', { '<%= model.name %>': <%= model.name %> });
			});
		});

		// edit post 
		app.post('/<%= model.name %>/edit', function(req, res) { 
			self.<%= model.name %>Service.get(req.body.id, function(<%= model.name %>){
				self.<%= model.name %>Service.update(<%= model.name %>, req.body, function(<%= model.name %>){
					res.redirect('/<%= model.name %>');
				});
			});
		}); 

		// delete get
		app.get('/<%= model.name %>/delete/:id', function(req, res) {
			var <%= model.name %>Id = req.params.id;
			self.<%= model.name %>Service.get(<%= model.name %>Id, function(<%= model.name %>) {
				res.render('<%= model.name %>/delete', {'<%= model.name %>': <%= model.name %>});
			});
		});

		// delete post
		app.post('/<%= model.name %>/delete', function(req, res) {
			self.<%= model.name %>Service.remove(req.body.id, function(data) {
				res.redirect('/<%= model.name %>');
			});
		});
    };

    return <%= model.name %>Controller;
})();
