/**
* <%= model.name %> apiController class
*/
var <%= model.name %>ApiController = module.exports = (function () {

	var _<%= model.name %>Service = require('../services/<%= model.name %>Service');

    /**
    * @param {app} - express app.
    */
    function <%= model.name %>ApiController(app) {
        this.app = app;
		this.<%= model.name %>Service = new _<%= model.name %>Service();
        this.actions(this.app);
    }

    /**
    * <%= model.name %> Controller actions.
    * @param {app}
    */
    <%= model.name %>ApiController.prototype.actions = function (app) {
		var self = this;

		// index
		app.get('/api/<%= model.name %>', function(req, res) {
			self.<%= model.name %>Service.getAll(function(<%= model.name %>s) {
				res.send(<%= model.name %>s);
			})
		});

		// details
		app.get('/api/<%= model.name %>/:id', function(req, res) {
			var <%= model.name %>Id = req.params.id;
			self.<%= model.name %>Service.get(<%= model.name %>Id, function(<%= model.name %>) {
				res.send(<%= model.name %>);
			});
		});

		// create
		app.post('/api/<%= model.name %>/', function(req, res) {
			self.<%= model.name %>Service.save(req.body, function(data) {
				res.send(data);
			});
		});

		// update
		app.put('/api/<%= model.name %>/:id', function(req, res) {
			var <%= model.name %> = req.body;
			self.<%= model.name %>Service.update(<%= model.name %>, function(<%= model.name %>) {
				res.send(<%= model.name %>);
			});
		});

		// delete
		app.delete('/api/<%= model.name %>/:id', function(req, res) {
			self.<%= model.name %>Service.destroy(req.params.id, function() {
				res.send({mesage: '<%= model.name %> delete'});
			});
		});
    };

    return <%= model.name %>ApiController;
})();